<html>
<head>
  <title>Exercise 14</title>
  <script type="text/javascript">
    function isValidLetter(ch)
    {
      ch = ch.toLowerCase();
      if (ch >= 'a' && ch <= 'z')
        return true;
      if (ch == '-' || ch == ' ')
        return true;
      return false;
    }
    function isValidName(name)
    {
      for (var i = 0; i < name.length; i++) {
        var c = name.charAt(i);
        if (!isValidLetter(c)) {
          return false;
        }
      }
      return true;
    }
    function isValidAge(agetotest)
    {
      if (isNaN(agetotest))
        return false;
      var age = parseFloat(agetotest);
      return age >= 0 && age < 100;
    }

    function isValidPostcode(e){
      let reg = new RegExp("^[1-9][0-9]{3} ?[a-zA-Z]{2}$", "i");
      return reg.test(e)
    }
 
    function validate()
    {
      let dataok = true;
      let errorstring = ""
      let firstname = persondata.firstname.value;
      let lastname = persondata.lastname.value;
      let age = persondata.age.value;
      let postcode = persondata.postalcode.value;

      if(firstname.length > 0 
      && isValidName(firstname)){
        }
       else{
      dataok= false;
      errorstring += "Voornaam niet ingevuld of correct <br>"
    }   

    if(lastname.length > 0 
      && isValidName(lastname)){
        }
       else{
      dataok= false;
      errorstring += "Achternaam niet ingevuld of correct <br>"
    }     

    if(isValidPostcode(postcode)){
    }else {
      dataok = false
      errorstring += "Onjuiste postcode <br>" 
    }                                    
    
    if(age.length > 0 
      && isValidAge(age)){}
       else{
      dataok= false;
      errorstring += "Leeftijd niet ingevuld of tussen 0 en 99 <br>"
    }         

      document.getElementById('errorlist').innerHTML= errorstring
      return dataok
    }
  
  </script>
</head>
<body>
  <h2>
    Exercise 14</h2>
  <form action="success.html" name="persondata" onsubmit="return validate()">
  <table>
    <tr>
      <td>
        First Name:
      </td>
      <td>
        <input type="text" name="firstname" />
      </td>
    </tr>
    <tr>
      <td>
        Last Name:
      </td>
      <td>
        <input type="text" name="lastname" />
      </td>
    </tr>
    <tr>
      <td>
        Postal Code:
      </td>
      <td>
        <input type="text" name="postalcode" />
      </td>
    </tr>
    <tr>
      <td>
        Age
      </td>
      <td>
        <input type="text" name="age" />
      </td>
    </tr>
    <tr>
      <td colspan="2" align="center">
        <input type="submit" style="font-size: larger" name="submit" value="Submit data" />
      </td>
    </tr>
  </table>
  <div id="errorlist" style="font-weight: bold; color: red;">
  </div>
  </form>
</body>
</html>
